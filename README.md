# macOS 微信多开工具 (WeChat Multi-Instance Tool)

一个用于在 macOS 上创建和管理多个微信实例的工具，让您可以同时登录多个微信账号。

## 🚀 功能特性

- ✅ **创建微信实例** - 快速创建新的微信应用副本
- ✅ **启动管理** - 启动已创建的微信实例
- ✅ **实例列表** - 查看所有已安装的微信实例
- ✅ **删除管理** - 清理不需要的微信实例
- ✅ **交互式菜单** - 友好的命令行界面
- ✅ **错误处理** - 完善的错误处理和用户提示
- ✅ **安全检查** - 磁盘空间检查和权限验证

## 📋 系统要求

- **操作系统**: macOS 12 Monterey 或更高版本
- **微信版本**: 已安装的微信4.0应用
- **权限**: 需要管理员权限（用于复制和签名应用）
- **磁盘空间**: 每个实例约需要 150-200MB 空间

## 🛠️ 安装方法

1. **克隆仓库**
   ```bash
   git clone https://github.com/yourusername/DoubleWeChat.git
   cd DoubleWeChat
   ```

2. **添加执行权限**
   ```bash
   chmod +x double-wechat.sh
   ```

3. **运行脚本**
   ```bash
   ./double-wechat.sh
   ```

## 📖 使用方法

### 基本使用

运行脚本后，您将看到交互式菜单：

```
=== 微信多开管理工具 ===
1. 创建新的微信实例
2. 启动现有微信实例
3. 列出所有微信实例
4. 删除微信实例
5. 退出
=======================
```

### 创建新实例

1. 选择选项 `1`
2. 输入实例编号 (0-9)
3. 脚本会自动：
   - 检查磁盘空间
   - 复制微信应用
   - 修改应用标识符
   - 重新签名应用
   - 启动新实例

### 启动现有实例

1. 选择选项 `2`
2. 从列表中选择要启动的实例
3. 脚本会启动选中的微信实例

### 管理实例

- **查看实例**: 选择选项 `3` 查看所有已安装的实例
- **删除实例**: 选择选项 `4` 删除不需要的实例

## 🔧 技术原理

### 应用隔离机制

1. **文件系统隔离**: 每个实例都有独立的 `.app` 文件
2. **标识符隔离**: 不同的 Bundle Identifier 让系统识别为不同应用
3. **进程隔离**: 每个实例运行在独立的进程中

### 核心步骤

1. **复制应用**: `sudo cp -R /Applications/WeChat.app "/Applications/WeChat{number}.app"`
2. **修改标识符**: 使用 `PlistBuddy` 修改 Bundle Identifier
3. **重新签名**: 使用 `codesign` 重新签名应用
4. **启动实例**: 使用 `nohup` 在后台启动

## ⚠️ 注意事项

### 安全提醒

- 脚本需要管理员权限，请确保您信任此脚本
- 建议在运行前备份重要数据
- 不要删除原始的 `WeChat.app`

### 限制说明

- 最多可创建 10 个实例 (编号 0-9)
- 每个实例约占用 150-200MB 磁盘空间
- 需要确保有足够的磁盘空间

## 🐛 故障排除

### 常见问题

**Q: 脚本提示"未找到原始微信应用"**
A: 请确保微信已正确安装在 `/Applications/WeChat.app`

**Q: 创建实例时提示权限错误**
A: 确保您有管理员权限，可能需要输入密码

**Q: 启动实例失败**
A: 检查是否有足够的磁盘空间，或尝试重新创建实例

**Q: 实例无法正常登录**
A: 这是正常现象，每个实例都是独立的，需要重新登录

### 错误代码

- `Exit 1`: 一般错误（权限、文件不存在等）
- `Exit 2`: 语法错误
- `Exit 130`: 用户中断（Ctrl+C）

---

**免责声明**: 本工具仅供学习和个人使用，请遵守相关法律法规和微信用户协议。使用本工具产生的任何后果由用户自行承担。
